---
title: "report"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Harry Potter 

## Abstract

## Motivation? or maybe this is abstract

Word embedding is a natural language processing (NLP) technique used to quantify the similar between words by mathematically modelling the co-occurrence of words in a body of text. Word embedding is widely used in many applications of text analysis, such as finding analogies (C Bail word emedding tutorial), identifying features in authorship (Roger d. peng quant anal lit styles) and relationship strengths between characters in works of fiction (char anal of social network). An opportunity to apply work embedding techniques in popular works of fiction presented itself with the Harry Potter text package made available in R, on CRAN. The Harry Potter text package contained the full text of all seven original series book presents an opportunity to apply text analysis techniques to uncover interesting insights. In this exploratory work, we applied word embedding techniques and text network visualization package (C Bail text networks), we analyzed and visualized character interactions in different parts of the stories, to see how different characters associate in different settings. The results of this study show that word embedding techniques can be applied to extract insights of character interactions in Harry Potter texts by J.K. Rowling.

## Related Work

Analysis of works of fiction at the word level may reveal interesting insight of literary value, and sometimes it may even have surprising real world applications. In the literary spehere, Peng et al. published an overview on the signature of authorship in literary styles. It has been established that there is structure in text data that identifies authorship, which can be discovered by quantifying relevant features related to literary style. However, it is way more challenging is how to determine which sets of features contributes to authorship.

In a more applicable twist, Fast et al derived a knowledge base of human behaviour from works of fiction using text analysis techniques. These researchers showed that computers understood human actions and were able to adjust their services to humans based on prediction of the human's next likely course of action. Their work revealed that fictional human lives mirrors real human lives quite closely.

Lastly, in another study, Seo et al. constructed social networks for fictional characters. They visualized fictional characters as vertices and diagrammed the relationship strengths between them as edges. Seo et al. analyzed topological structures of social network graphs to reveal hidden structure of fiction novels, to order works by graph topology as opposed to traditional categories. In their work, they were able to show that co-occurrence patterns reveal features hidden in the text. Interactions measured by statement distance between characters; i.e. co-occurrence of full character names in one statement suggest they are highly related. 

In this study, we created social network graphs in a similar approach as Seo et al. However, as opposed to character name occurrences, we used semantic similarity of words spoken by the characters (i.e. character dialogues in quotes) to visualize "social closeness".

## Methods

### Locate Character Scenes and Appearances

Since the Harry Potter text package contained all text from the books in strings, we had to come up with a heuristic to determine how to extract and isolate text that represent social interactions. The chosen shortcut to quickly get relevant information about the position of characters as well as scenes of social interaction are determined by quotes, as conversations typically indicate social interactions. Going off of those assumptions, we then assumed based on our understanding of the English literature, that typically quotes are followed by signatures that designate which character spoke it (e.g. "...", said Harry). Therefore, obtaining some text character surrounding quotes will obtain the name of the character speaking. Additionally, some rules to simplify character name extraction. For example, Seo et al. ignored designated words used in place of character names (i.e. he, him, she, etc). For our purposes, to reduce complexity of analysis, we would want to obtain interesting diagrams while working with limited space in . If our methods could identify characters' quotes by first name or heuristic common alias (ex. Malfoy instead of Draco) would be sufficient.

### Quotes Extraction and Preparation

A regex pattern was used to match character dialogues enclosed by double quotation marks, along with a 15 letters head and 20 letters trailing tail; the resulting match was extracted from the text of books. Lists of characters' names use were sometimes referenced by list of popularity, or again based on personal preference (i.e. which characters' interactions might I wish to see). Character names were assigned by finding a match in the extracted dialogues.

### Use of TextNets Package

The R textnets package was used to create the Harry Potter characters social network graph. Two-mode network projection was used to link up and show relationship between pairs of characters, although only one of the modes, namely "metadata" or character names as nodes are of interest.

Harry Potter data was prepped as a dataframe contianing rows of extracted quotes form book text, and character names extracted from quotes. Then, PrepText function was used to tokenize, lemmatize and remove stopwords from quotes to prepare words for creating the network. PrepText function prepared a weighted adjacency matrix by transposing cross-product of the adjacency matrix with term-frequency inverse-document frequency matrix of words in the quotes. In this way, word similarity was quantified.

## Conclusions

### Results

A. Harry Potter and the Philosopher Stone 75 Quotes Visualization

B. Battle of Hogwarts (Harry Potter and the Deathly Hallows) 193 Quotes Visualization

### Discussion

In this work, we mapped word similarity in dialogue text to Harry Potter characters and created a social network graph to visualize character relationships. Quotes with head and tail letters were extracted from the Harry Potter book texts, and word similarity was calculated by the textnet package function PrepText, which created a weighted adjacency matrix using word embedding technique. The method of quantitative text analysis was then applied to two literature selections. 1.Philosopher Stone quotes sample 2.Battle of Hogwarts quotes sample

### Limitations

- limitation in knowledge about literary and text analysis to uncover underlying structures in Harry Potter text that is meaningful
- heuristic used in obtaining quotes is flawed; the method to extract quotes by matching to pattern of double quotes with escape characters doesn't comprehensively obtain all quotes, and then to extract match of character name from it is likely even more inaccurate
- not a comprehensive survey of the literature, different dynamics may exist in parts that are not surveyed due to poor choice of sampling
- PrepText defaults to using all parts of speech in quotes provided, however, limiting (e.g. Rule, Cointet, and Bearman 2015)

## References

*remember to format in IEEE style*
- [Word Embeddings](https://cbail.github.io/textasdata/word2vec/rmarkdown/word2vec.html)
- [Creating Text Networks](https://cbail.github.io/textasdata/text-networks/rmarkdown/Text_Networks.html)
- [Characteristic Analysis of Social Network Constructed from Literary Fiction]()
- [Augur: Mining Human Behaviors from Fiction to Power Interactive Systems]()
- [Combining natural language processing and network analysis to examine how advocacy organizations stimulate conversation on social media]()
- [Building a Harry Potter QuoteBot with Machine Learning](https://towardsdatascience.com/building-a-quotebot-with-machine-learning-eca39272e3b7)


```{r pressure, echo=FALSE}
plot(pressure)
```

